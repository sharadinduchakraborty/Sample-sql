SET SERVEROUTPUT ON

DECLARE
 ENO EMP.EMPNO% TYPE;
 NM  EMP.ENAME%TYPE;
 V VARCHAR(4);
 Y NUMBER;
CURSOR Z IS SELECT DISTINCT TO_CHAR(HIREDATE,'YYYY')FROM EMP;
CURSOR S(D VARCHAR) IS SELECT EMPNO,ENAME FROM EMP WHERE TO_CHAR(HIREDATE,'YYYY')=D;
E EXCEPTION;

BEGIN
Y:=0;
FOR I IN Z
LOOP
OPEN S(I.YEAR);
FETCH S INTO ENO,NM;
IF(S%NOTFOUND)THEN
RAISE E;
END IF;
DBMS_OUTPUT.PUT_LINE('*************************');
DBMS_OUTPUT.PUT_LINE('EMPNO'||'		'||'ENAME');
DBMS_OUTPUT.PUT_LINE('------------------------------------');
LOOP
DBMS_OUTPUT.PUT_LINE(ENO||'		'||NM);
Y:=S%ROWCOUNT;
FETCH S INTO ENO,NM;
EXIT WHEN S%NOTFOUND;
END LOOP;

DBMS_OUTPUT.PUT_LINE('------------------------------------');
DBMS_OUTPUT.PUT_LINE('NO OF EMPLOYEES :  '||Y);
DBMS_OUTPUT.PUT_LINE('------------------------------------');
CLOSE S;

EXCEPTION
WHEN E THEN
DBMS_OUTPUT.PUT_LINE('INVALID YEAR');
END;
/