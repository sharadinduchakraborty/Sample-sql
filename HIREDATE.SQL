SET SERVEROUTPUT ON 

DECLARE 
ENO EMP.EMPNO%TYPE;
NM    EMP.ENAME%TYPE;
Y NUMBER;
CURSOR S1 IS SELECT DISTINCT TO_CHAR(HIREDATE,'YYYY')  YEAR FROM EMP;
CURSOR S (V VARCHAR) IS SELECT EMPNO,ENAME FROM EMP WHERE TO_CHAR(HIREDATE,'YYYY')=V;
E EXCEPTION;

BEGIN
Y:=0;
FOR I IN S1
LOOP
OPEN S(I.YEAR);
FETCH S INTO ENO,NM;
IF (S%NOTFOUND) THEN 
RAISE E;
END IF;
DBMS_OUTPUT.PUT_LINE('************'||I.YEAR||'****************');
DBMS_OUTPUT.PUT_LINE('EMPNO'||'          '||'ENAME');
DBMS_OUTPUT.PUT_LINE('-------------------------------------------------------------------');
LOOP
DBMS_OUTPUT.PUT_LINE(ENO||'          '||NM);
Y:=S%ROWCOUNT;
FETCH S INTO ENO,NM;
EXIT WHEN S%NOTFOUND;
END LOOP;

DBMS_OUTPUT.PUT_LINE('TOTAL NUMBER OF EMPLOYEE='||Y);
DBMS_OUTPUT.PUT_LINE('-------------------------------------------------------------------');
CLOSE S;
END LOOP;


EXCEPTION
WHEN E THEN
DBMS_OUTPUT.PUT_LINE('INVALID YEAR');
END;
/